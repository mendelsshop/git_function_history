on: 
  push:
  workflow_dispatch:
name: Clippy check + test for the lib
jobs:
  clippy_check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: |
          rustup component add clippy
          ls
          cat Cargo.toml
          cd git-function-history-lib
          cat Cargo.toml
          cargo clippy --all-targets --all-features -- -D warnings

  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: setup rust
        uses: dtolnay/rust-toolchain@stable
      - name: test
        run: |
          ls
          cat Cargo.toml 
          cd git-function-history-lib
          cat Cargo.toml
          cargo test -- --nocapture